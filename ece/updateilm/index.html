<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico" type="image/x-icon"><title>Changing Lifecycle Policies | Documentation</title><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Changing Lifecycle Policies" /><meta property="og:locale" content="en" /><meta name="description" content="Changing (default) Lifecycle Policies" /><meta property="og:description" content="Changing (default) Lifecycle Policies" /><link rel="canonical" href="/ece/updateilm/" /><meta property="og:url" content="/ece/updateilm/" /><meta property="og:site_name" content="Documentation" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-08-29T14:38:18+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Changing Lifecycle Policies" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-08-29T14:38:18+00:00","datePublished":"2024-08-29T14:38:18+00:00","description":"Changing (default) Lifecycle Policies","headline":"Changing Lifecycle Policies","mainEntityOfPage":{"@type":"WebPage","@id":"/ece/updateilm/"},"url":"/ece/updateilm/"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"><svg class="site-logo" width="44" height="51" viewBox="0 0 44 51" fill="none" focusable="false" xmlns="http://www.w3.org/2000/svg"><path d="M21.9985 0L32.9985 6.35022L38.1104 9.30107L31.1561 13.3166L29.5221 12.3727L21.9985 8.02952L14.4749 12.3727L6.95126 16.716V25.4024V34.0888L14.4749 38.432L21.9985 42.7753L29.5221 38.432L44 30.0733V38.1043L33 44.4561L22 50.8063L11 44.4561L0 38.1043V25.4024V12.7004L11 6.34871L21.9985 0ZM21.9985 34.6597L29.1657 30.5218L36.4764 26.3009L44 21.9577V13.9267L33 20.2784L22 26.6301V34.6597H21.9985ZM28.9543 30.6441L29.1672 30.5218L28.9543 30.6441Z" fill="#111" /><path d="M21.9985 34.6588L29.1658 30.5209L36.4764 26.3L44 21.9568V13.9258L33 20.2775L22 26.6292V34.6588H21.9985ZM28.9543 30.6432L29.1673 30.5209L28.9543 30.6432Z" fill="#111" /> </svg><div class="rp_title"> Documentation</div></a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"></ul><div class="nav-category">Elastic Cloud Enterprise</div><ul class="nav-list"><li class="nav-list-item"><a href="/ece/intro" class="nav-list-link">Introduction</a><li class="nav-list-item"><a href="/ece/shipdata/" class="nav-list-link">Shipping data to Elastic</a><li class="nav-list-item active"><a href="/ece/updateilm/" class="nav-list-link active">Changing Lifecycle Policies</a></ul><div class="nav-category">GKS</div><ul class="nav-list"></ul><div class="nav-category">Oncite Open Edition</div><ul class="nav-list"><li class="nav-list-item"><a href="/edge/productoverview/" class="nav-list-link">Product Overview</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Operations Center category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/edge/operationscenter/" class="nav-list-link">Operations Center</a><ul class="nav-list"><li class="nav-list-item "><a href="/edge/operationscenter/vpnaas/" class="nav-list-link">VPN as a Service</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Openstack category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/edge/openstack/" class="nav-list-link">Openstack</a><ul class="nav-list"><li class="nav-list-item "><a href="/edge/openstack/create_vm/" class="nav-list-link">Create VM</a></ul><li class="nav-list-item"><a href="/edge/faq/" class="nav-list-link">FAQ</a></ul><div class="nav-category">Optimist</div><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Guided Tour category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/optimist/guided_tour/" class="nav-list-link">Guided Tour</a><ul class="nav-list"><li class="nav-list-item "><a href="/optimist/guided_tour/step01/" class="nav-list-link">01: The Horizon (Dashboard)</a><li class="nav-list-item "><a href="/optimist/guided_tour/step02/" class="nav-list-link">02: Create an SSH-Key with the Horizon (Dashboard)</a><li class="nav-list-item "><a href="/optimist/guided_tour/step03/" class="nav-list-link">03: Spawn a new Stack</a><li class="nav-list-item "><a href="/optimist/guided_tour/step04/" class="nav-list-link">04: Your way to the console</a><li class="nav-list-item "><a href="/optimist/guided_tour/step05/" class="nav-list-link">05: An overview of the most important OpenStackClient commands</a><li class="nav-list-item "><a href="/optimist/guided_tour/step06/" class="nav-list-link">06: Create and use your own SSH-Key</a><li class="nav-list-item "><a href="/optimist/guided_tour/step07/" class="nav-list-link">07: The first VM</a><li class="nav-list-item "><a href="/optimist/guided_tour/step08/" class="nav-list-link">08: Delete the first VM</a><li class="nav-list-item "><a href="/optimist/guided_tour/step09/" class="nav-list-link">09: Security Groups</a><li class="nav-list-item "><a href="/optimist/guided_tour/step10/" class="nav-list-link">10: Get access to the Internet; Create a network</a><li class="nav-list-item "><a href="/optimist/guided_tour/step11/" class="nav-list-link">11: Prepare access to the Internet; Add IPv6 to your network</a><li class="nav-list-item "><a href="/optimist/guided_tour/step12/" class="nav-list-link">12: A usable VM</a><li class="nav-list-item "><a href="/optimist/guided_tour/step13/" class="nav-list-link">13: The structured way to create an instance (with stacks)</a><li class="nav-list-item "><a href="/optimist/guided_tour/step14/" class="nav-list-link">14: Your first steps with HEAT</a><li class="nav-list-item "><a href="/optimist/guided_tour/step15/" class="nav-list-link">15: The first heat template</a><li class="nav-list-item "><a href="/optimist/guided_tour/step16/" class="nav-list-link">16: Get to know HEAT better</a><li class="nav-list-item "><a href="/optimist/guided_tour/step17/" class="nav-list-link">17: The network in Heat</a><li class="nav-list-item "><a href="/optimist/guided_tour/step18/" class="nav-list-link">18: Making your VM reachable via IPv4</a><li class="nav-list-item "><a href="/optimist/guided_tour/step19/" class="nav-list-link">19: Add IPv6 to your template</a><li class="nav-list-item "><a href="/optimist/guided_tour/step20/" class="nav-list-link">20: Build multiple VMs with HEAT</a><li class="nav-list-item "><a href="/optimist/guided_tour/step21/" class="nav-list-link">21: Start a VM with an SSD volume</a><li class="nav-list-item "><a href="/optimist/guided_tour/step22/" class="nav-list-link">22: Create a DNS record in Designate</a><li class="nav-list-item "><a href="/optimist/guided_tour/step23/" class="nav-list-link">23: Object Storage (S3 compatible)</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Networking category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/optimist/networking/" class="nav-list-link">Networking</a><ul class="nav-list"><li class="nav-list-item "><a href="/optimist/networking/port_forwarding/" class="nav-list-link">Port Forwarding on Floating IPs</a><li class="nav-list-item "><a href="/optimist/networking/shared_networks/" class="nav-list-link">Shared Networks</a><li class="nav-list-item "><a href="/optimist/networking/vpnaas/" class="nav-list-link">VPN as a Service</a><li class="nav-list-item "><a href="/optimist/networking/octavia_loadbalancer/" class="nav-list-link">Octavia Loadbalancers</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Storage category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/optimist/storage/" class="nav-list-link">Storage</a><ul class="nav-list"><li class="nav-list-item "><button class="nav-list-expander btn-reset" aria-label="toggle items in S3 Compatible Object Storage category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/optimist/storage/s3_documentation/" class="nav-list-link">S3 Compatible Object Storage</a><ul class="nav-list"><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/createanduses3credentials/" class="nav-list-link">Create and Use S3 Credentials</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/createanddeletebucket/" class="nav-list-link">Create and Delete a Bucket</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/uploadanddeleteobject/" class="nav-list-link">Upload and delete an object</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/versioning/" class="nav-list-link">Enable and Disable Versioning, and Delete a versioned object</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/security/" class="nav-list-link">S3 Security</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/swiftservestaticwebsite/" class="nav-list-link">Swift - Serving a Static Website</a><li class="nav-list-item "> <a href="/optimist/storage/s3_documentation/backupwithrestic/" class="nav-list-link">Secure Backups with Restic and Rclone</a></ul><li class="nav-list-item "><a href="/optimist/storage/localstorage/" class="nav-list-link">Localstorage</a></ul><li class="nav-list-item"><a href="/optimist/faq/" class="nav-list-link">FAQ</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Specifications category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/optimist/specs/" class="nav-list-link">Specifications</a><ul class="nav-list"><li class="nav-list-item "><a href="/optimist/specs/flavor_specification/" class="nav-list-link">Flavor Specifications</a><li class="nav-list-item "><a href="/optimist/specs/default_quota/" class="nav-list-link">Default Quotas</a><li class="nav-list-item "><a href="/optimist/specs/application_credentials/" class="nav-list-link">Application Credentials</a><li class="nav-list-item "><a href="/optimist/specs/volume_specification/" class="nav-list-link">Volume Specifications</a><li class="nav-list-item "><a href="/optimist/specs/images/" class="nav-list-link">Images</a><li class="nav-list-item "><a href="/optimist/specs/shelving_instances/" class="nav-list-link">Shelving Instances</a></ul><li class="nav-list-item"><a href="/optimist/changelog/" class="nav-list-link">Changelog</a></ul></nav><a href="https://gec.io/company/zertifizierungen/" target="_blank"><div style="display: flex; justify-content: space-between; padding: 16px; width: 280px"> <img id="isoimage" src="https://s3.es1.fra.optimist.gec.io/swift/v1/static/docs/iso9001.webp" alt="ISO 9001" style="flex-grow: 1; object-fit: contain; height: 1.5rem; "> <img src="https://s3.es1.fra.optimist.gec.io/swift/v1/static/docs/iso27001.webp" alt="ISO 27001" style="flex-grow: 1; object-fit: contain; height: 1.5rem; "> <img src="https://s3.es1.fra.optimist.gec.io/swift/v1/static/docs/isae-3402-t2certified-logo-cmyk1-page-001_rdax_565x282_100.webp" alt="ISAE 3402" style="flex-grow: 1; object-fit: contain; height: 1.5rem;"></div></a> <script language="javascript" type="text/javascript"> var d = new Date(); document.getElementById("isoimage").src = "https://s3.es1.fra.optimist.gec.io/swift/v1/static/docs/iso9001.webp?ver=" + d.getTime(); </script></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search" role="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Documentation" aria-label="Search Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><ul class="language-list"><li class="language-list-item"> <a class="language-list-link active" href=" /ece/updateilm/ " >English</a ><li class="language-list-item"> <a class="language-list-link" href=" /de/ece/updateilm/ " >Deutsch</a ></ul></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content"><main><h1 class="no_toc" id="changing-default-lifecycle-policies"> <a href="#changing-default-lifecycle-policies" class="anchor-heading" aria-labelledby="changing-default-lifecycle-policies"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Changing (default) Lifecycle Policies</h1><p>This little guide will show you how to adapt the standard Index Lifecycle Policies to your specific needs.</p><ul id="markdown-toc"><li><a href="#definition-of-terms" id="markdown-toc-definition-of-terms">Definition of Terms</a><li><a href="#getting-the-current-ilm-policy" id="markdown-toc-getting-the-current-ilm-policy">Getting the Current ILM Policy</a><li><a href="#creating-a-new-ilm-policy" id="markdown-toc-creating-a-new-ilm-policy">Creating a New ILM Policy</a><ul><li><a href="#using-the-ui" id="markdown-toc-using-the-ui">Using the UI</a><ul><li><a href="#hot-phase" id="markdown-toc-hot-phase">Hot Phase</a><li><a href="#warm-phase" id="markdown-toc-warm-phase">Warm Phase</a><li><a href="#cold-phase" id="markdown-toc-cold-phase">Cold Phase</a><li><a href="#frozen-phase" id="markdown-toc-frozen-phase">Frozen Phase</a><li><a href="#delete-phase" id="markdown-toc-delete-phase">Delete Phase</a></ul><li><a href="#using-dev-tools" id="markdown-toc-using-dev-tools">Using Dev Tools</a></ul><li><a href="#assigning-the-policy-to-an-index" id="markdown-toc-assigning-the-policy-to-an-index">Assigning the Policy to an Index</a><li><a href="#rollover-the-data-stream" id="markdown-toc-rollover-the-data-stream">Rollover the Data Stream</a></ul><h2 id="definition-of-terms"> <a href="#definition-of-terms" class="anchor-heading" aria-labelledby="definition-of-terms"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Definition of Terms</h2><p>Before we start, let’s define some terms you will encounter throughout this guide.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Term<th style="text-align: left">Definition<tbody><tr><td style="text-align: left">ILM<td style="text-align: left">Abbreviation for Index Lifecycle Management. Determines the lifecycle of data and its allocation to the Elastic Data tiers. It is defined in Index Lifecycle Policies.<tr><td style="text-align: left">Data stream<td style="text-align: left">A collection of single indices. It could be viewed as a small DNS (Domain Name System) for index routing requests. A data stream can contain multiple indices.<tr><td style="text-align: left">Rollover<td style="text-align: left">Process of (automatically) creating a new index within a data stream in the Hot Phase so a single index does not grow indefinitely. It is defined in the Hot Phase of the Index Lifecycle Policy.</table></div><h2 id="getting-the-current-ilm-policy"> <a href="#getting-the-current-ilm-policy" class="anchor-heading" aria-labelledby="getting-the-current-ilm-policy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting the Current ILM Policy</h2><p>When using the Elastic Agent and Fleet, default policies are automatically applied to the data streams. These policies are kept simple and contain only a few phases, often only the hot phase.</p><p>The policy applied to the data streams can be found in Kibana.</p><p><img src="images/updILM_currPol.png" alt="getPolicy1" /></p><ol><li>Go to Kibana.<li>Open the menu and go to <strong>Stack Management</strong>.<li>Open <strong>Index Management</strong> and go to <strong>Data Streams</strong>.<li>On the popup on the right you can see the assigned ILM.</ol><p><img src="images/updILM_currPol2.png" alt="getPolicy2" /></p><h2 id="creating-a-new-ilm-policy"> <a href="#creating-a-new-ilm-policy" class="anchor-heading" aria-labelledby="creating-a-new-ilm-policy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a New ILM Policy</h2><h3 id="using-the-ui"> <a href="#using-the-ui" class="anchor-heading" aria-labelledby="using-the-ui"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the UI</h3><ol><li>To create a new ILM, select <strong>Stack Management</strong>.<li>Select <strong>Index Lifecycle Management</strong> and click <strong>Create Policy</strong>.<li>Provide a new name for the policy.</ol><p><img src="images/updILM_creaPol1.png" alt="createPolicy" /></p><h4 id="hot-phase"> <a href="#hot-phase" class="anchor-heading" aria-labelledby="hot-phase"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hot Phase</h4><p>The hot phase stores all data that is newly indexed and data that is accessed very frequently. It is always the first phase and thus mandatory. In our example, we have deactivated the setting “Use recommended defaults” to reduce the maximum age of data before rollover from the default 30 days to 7 days.</p><p><img src="images/updILM_hotphase.png" alt="HotPhase" /></p><h4 id="warm-phase"> <a href="#warm-phase" class="anchor-heading" aria-labelledby="warm-phase"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Warm Phase</h4><p>After the data has been collected in the index for 7 days or the index reaches a size of 50 GB, we want the index to immediately transition to the second phase, called the warm phase. In this tier we lower the priority of the indices and set them to read-only.</p><p><img src="images/updILM_warmphase.png" alt="WarmPhase" /></p><h4 id="cold-phase"> <a href="#cold-phase" class="anchor-heading" aria-labelledby="cold-phase"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cold Phase</h4><p>After 7 days in the warm phase, data moves to the next phase, called the cold phase. In this phase, we enable searchable snapshots to reduce the storage footprint on the elastic instances. The data is now a searchable snapshot stored in the Object Storage which is already highly available itself. Therefore, we can set the number of replicas and the priority to zero.</p><p><img src="images/updILM_coldphase.png" alt="ColdPhase" /></p><h4 id="frozen-phase"> <a href="#frozen-phase" class="anchor-heading" aria-labelledby="frozen-phase"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Frozen Phase</h4><p>In this phase, actual data is removed from the Elasticsearch nodes and only a small cache remains. When the data is accessed, it is retrieved from the snapshot to make it accessible.</p><p><img src="images/updILM_frozenphase.png" alt="FrozenPhase" /></p><h4 id="delete-phase"> <a href="#delete-phase" class="anchor-heading" aria-labelledby="delete-phase"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Delete Phase</h4><p>This phase removes indices that have reached a certain age.</p><p><img src="images/updILM_deletephase.png" alt="DeletePhase" /></p><h3 id="using-dev-tools"> <a href="#using-dev-tools" class="anchor-heading" aria-labelledby="using-dev-tools"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Dev Tools</h3><p>A new ILM Policy can also be created in the Kibana Dev Tools. The console can be found at <strong>Management → Dev Tools</strong>.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PUT _ilm/policy/&lt;add-some-name-here&gt;
<span class="o">{</span>
  <span class="s2">"policy"</span>: <span class="o">{</span>
    <span class="s2">"phases"</span>: <span class="o">{</span>
      <span class="s2">"hot"</span>: <span class="o">{</span>
        <span class="s2">"min_age"</span>: <span class="s2">"0ms"</span>,
        <span class="s2">"actions"</span>: <span class="o">{</span>
          <span class="s2">"rollover"</span>: <span class="o">{</span>
            <span class="s2">"max_primary_shard_size"</span>: <span class="s2">"50gb"</span>,
            <span class="s2">"max_age"</span>: <span class="s2">"7d"</span>
          <span class="o">}</span>,
          <span class="s2">"set_priority"</span>: <span class="o">{</span>
            <span class="s2">"priority"</span>: 100
          <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"warm"</span>: <span class="o">{</span>
        <span class="s2">"min_age"</span>: <span class="s2">"0d"</span>,
        <span class="s2">"actions"</span>: <span class="o">{</span>
          <span class="s2">"set_priority"</span>: <span class="o">{</span>
            <span class="s2">"priority"</span>: 50
          <span class="o">}</span>,
          <span class="s2">"readonly"</span>: <span class="o">{}</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"cold"</span>: <span class="o">{</span>
        <span class="s2">"min_age"</span>: <span class="s2">"7d"</span>,
        <span class="s2">"actions"</span>: <span class="o">{</span>
          <span class="s2">"readonly"</span>: <span class="o">{}</span>,
          <span class="s2">"searchable_snapshot"</span>: <span class="o">{</span>
            <span class="s2">"snapshot_repository"</span>: <span class="s2">"found-snapshots"</span>,
            <span class="s2">"force_merge_index"</span>: <span class="nb">true</span>
          <span class="o">}</span>,
          <span class="s2">"set_priority"</span>: <span class="o">{</span>
            <span class="s2">"priority"</span>: 0
          <span class="o">}</span>,
          <span class="s2">"allocate"</span>: <span class="o">{</span>
            <span class="s2">"number_of_replicas"</span>: 0
          <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"frozen"</span>: <span class="o">{</span>
        <span class="s2">"min_age"</span>: <span class="s2">"14d"</span>,
        <span class="s2">"actions"</span>: <span class="o">{</span>
          <span class="s2">"searchable_snapshot"</span>: <span class="o">{</span>
            <span class="s2">"snapshot_repository"</span>: <span class="s2">"found-snapshots"</span>,
            <span class="s2">"force_merge_index"</span>: <span class="nb">true</span>
          <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"delete"</span>: <span class="o">{</span>
        <span class="s2">"min_age"</span>: <span class="s2">"70d"</span>,
        <span class="s2">"actions"</span>: <span class="o">{</span>
          <span class="s2">"delete"</span>: <span class="o">{</span>
            <span class="s2">"delete_searchable_snapshot"</span>: <span class="nb">true</span>
          <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><h2 id="assigning-the-policy-to-an-index"> <a href="#assigning-the-policy-to-an-index" class="anchor-heading" aria-labelledby="assigning-the-policy-to-an-index"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Assigning the Policy to an Index</h2><p>The newly created policy can then be assigned to an Index Template from the <strong>Index Lifecycle Policies</strong> menu.</p><p><img src="images/updILM_assignpol1.png" alt="assignPolicy1" /></p><p><img src="images/updILM_assignpol2.png" alt="assignPolicy2" /></p><h2 id="rollover-the-data-stream"> <a href="#rollover-the-data-stream" class="anchor-heading" aria-labelledby="rollover-the-data-stream"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Rollover the Data Stream</h2><p>In order to use the new ILM Policy immediately, we need to trigger a rollover for the data stream. This can be done in the Dev Tools, here for the data stream auditbeat-8.5.0:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST auditbeat-8.5.0/_rollover
</code></pre></div></div></main><hr><footer> <br/><br/><br/><div class="footer-navigation-links"> <a class="footer-navigation-link footer-navigation-link--previous" href="/ece/shipdata/"> <svg class="footer-navigation-link__icon" viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> <span class="footer-navigation-link__sublabel">Previous</span> <span class="footer-navigation-link__label">Shipping data to Elastic</span> </a></div><div class="footer-links"><div class=footer-hosted-with-love> <a href="https://github.com/gecio/gecio.github.io" target="_blank" rel="noopener noreferrer" >Hosted with love on GitHub</a></div><div class="footer-external-links"><ul><li class="footer-external-link"> <a href="https://gec.io" target="_blank" rel="noopener noreferrer" >Website</a ><li class="footer-external-link"> <a href="https://gec.io/impressum/" target="_blank" rel="noopener noreferrer" >Imprint</a ><li class="footer-external-link"> <a href="https://gec.io/datenschutz/" target="_blank" rel="noopener noreferrer" >Data Privacy</a ></ul></div></div></footer></div></div><div class="search-overlay"></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script>
